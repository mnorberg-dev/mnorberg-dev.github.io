<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>The Databricks Tool You Didn&#39;t Know You Needed | Matthew Norberg&#39;s Data Engineering Blog</title>
<meta name="keywords" content="databricks, tampermonkey, tools, productivity">
<meta name="description" content="Databricks is quickly becoming one of the most popular data lakehouse platforms out there. Its popularity is growing fast, and for many developers, a significant portion of the job happens directly in the browser inside their Databricks workspace.
Yes, I know‚Äîthere are popular extensions that let you develop code outside of Databricks. Many folks swear by the VS Code extension because they prefer working in their favorite editor. But at the end of the day, you‚Äôre still going to spend time in the browser making sure your code runs as expected.">
<meta name="author" content="Matthew Norberg">
<link rel="canonical" href="http://localhost:1313/posts/databricks-tab-label-tool/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.2b935d96f51fcfa3a0540ca89084f43b64dba9a9a58c52f9e02d7db55cd8497a.css" integrity="sha256-K5NdlvUfz6OgVAyokIT0O2TbqamljFL54C19tVzYSXo=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/databricks-tab-label-tool/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
</head>

<body class="" id="top">

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Matthew Norberg&#39;s Data Engineering Blog (Alt + H)">Matthew Norberg&#39;s Data Engineering Blog</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      The Databricks Tool You Didn&#39;t Know You Needed
    </h1>
    <div class="post-meta"><span title='2025-09-16 00:00:00 +0000 UTC'>September 16, 2025</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;Matthew Norberg

</div>
  </header> 
  <div class="post-content"><p>Databricks is quickly becoming one of the most popular data lakehouse platforms out there. Its popularity is growing fast, and for many developers, a significant portion of the job happens directly in the browser inside their Databricks workspace.</p>
<p>Yes, I know‚Äîthere are popular extensions that let you develop code outside of Databricks. Many folks swear by the VS Code extension because they prefer working in their favorite editor. But at the end of the day, you‚Äôre still going to spend time in the browser making sure your code runs as expected.</p>
<p>üëâ If you‚Äôd rather skip ahead and get straight to the solution, I‚Äôve published the script (with setup instructions) in this <a href="https://github.com/mnorberg-dev/databricks-tools">GitHub repo</a>.</p>
<h2 id="the-problem-too-many-tabs-too-few-clues">The Problem: Too Many Tabs, Too Few Clues<a hidden class="anchor" aria-hidden="true" href="#the-problem-too-many-tabs-too-few-clues">#</a></h2>
<p>Many organizations using Databricks have multiple workspaces to represent different environments‚Äîthink <code>dev</code>, <code>qa</code>, and <code>prod</code>. Some even have additional splits like staging or sandbox.</p>
<p>If you‚Äôre working across all of them, here‚Äôs the problem: <strong>your browser tabs all look the same.</strong></p>
<p><img alt="Too Many Tabs" loading="lazy" src="/tamper-monkey/many-tabs.png"></p>
<blockquote>
<p>Note: URLs in images are redacted, but in your environment, the redacted portions will appear as GUIDs.</p></blockquote>
<p>Inside the workspace, the situation isn‚Äôt much better. It&rsquo;s not easy to determine which environment you are in. Technically, each environment does identify itself in two places though:</p>
<ol>
<li><strong>The domain name.</strong> Every environment has a URL like <code>adb-&lt;long string of numbers&gt;</code>. But let‚Äôs be honest‚Äînobody remembers arbitrary GUIDs. It‚Äôs the same reason DNS exists: humans prefer names like <code>google.com</code> instead of memorizing IP addresses.</li>
<li><strong>A small piece of text in the top-right corner.</strong> Sure, it‚Äôs there, but after seeing it hundreds of times, your brain starts ignoring it. It‚Äôs easy to miss, and if you‚Äôre juggling multiple tabs, you can‚Äôt even see that text without clicking into each one.</li>
</ol>
<p>The end result? Confusion, context-switching, and the very real risk of running a query in <code>prod</code> that you meant for <code>dev</code>.</p>
<p><img alt="Small Workspace Indicator" loading="lazy" src="/tamper-monkey/workspace-indicator.png"></p>
<h2 id="but-wait-isnt-there-a-color-trick">But Wait, Isn‚Äôt There a Color Trick?<a hidden class="anchor" aria-hidden="true" href="#but-wait-isnt-there-a-color-trick">#</a></h2>
<p>Some people solve this by assigning different themes‚Äîsay, dark mode for <code>prod</code> and light mode for <code>dev</code>. Clever idea, but it falls apart quickly:</p>
<ul>
<li>There are only two color schemes available and many organizations have three workspaces meaning one environment will inevitably match another.</li>
<li>If two or more environments share a metastore, changing one changes the other.</li>
<li>And let‚Äôs be honest: some developers simply refuse to use a theme they don‚Äôt like.</li>
</ul>
<p>So while the color trick can work in a pinch, it‚Äôs not a real solution.</p>
<p><img alt="Dark Theme" loading="lazy" src="/tamper-monkey/dark-theme.png"></p>
<blockquote>
<p>To activate dark mode, navigate to Settings ‚Üí User Preferences ‚Üí ‚ÄúPrefer Dark.‚Äù</p>
<p>If you don‚Äôt enable this setting, your environment theme will default to match the light theme shown in the images above.</p></blockquote>
<h2 id="the-solution-tampermonkey-to-the-rescue">The Solution: Tampermonkey to the Rescue<a hidden class="anchor" aria-hidden="true" href="#the-solution-tampermonkey-to-the-rescue">#</a></h2>
<p>Enter <strong>Tampermonkey</strong>, a browser extension that lets you run custom JavaScript whenever you visit a matching URL.</p>
<p>With a short script, you can automatically label your Databricks browser tabs with an emoji + text identifier for each environment. Suddenly, <code>dev</code>, <code>qa</code>, and <code>prod</code> are crystal clear.</p>
<p>It‚Äôs simple, lightweight, and makes a huge difference:</p>
<ul>
<li>Faster navigation between environments</li>
<li>Reduced risk of editing the wrong workspace</li>
<li>A quality-of-life boost you‚Äôll wonder how you lived without</li>
</ul>
<p>And best of all: <strong>little to no performance impact</strong>. I‚Äôve been running this script for weeks, and my browser hasn‚Äôt skipped a beat.  Below, I&rsquo;ve provided an image illustrating what your dev environment will look like after setting up the Tamper Monkey script for yourself.</p>
<p><img alt="Tamper Monkey In Action" loading="lazy" src="/tamper-monkey/label-in-action.png"></p>
<h2 id="how-to-set-it-up">How to Set It Up<a hidden class="anchor" aria-hidden="true" href="#how-to-set-it-up">#</a></h2>
<p>Getting your Databricks tabs labeled automatically is quick and easy. You‚Äôll need to:</p>
<ol>
<li>Install Tampermonkey</li>
<li>Create a new script</li>
<li>Paste in the code</li>
<li>Configure your environment domains</li>
<li>Save and enable the script</li>
<li>Enable user scripts in your browser (Chrome only)</li>
<li>Verify it‚Äôs working</li>
</ol>
<blockquote>
<p>Note: These instructions are written for Google Chrome, but the steps can be adapted to other browsers that support Tampermonkey.</p></blockquote>
<p>Follow the steps below.</p>
<h3 id="1-install-tampermonkey">1. Install Tampermonkey<a hidden class="anchor" aria-hidden="true" href="#1-install-tampermonkey">#</a></h3>
<ul>
<li>Download Tampermonkey for your browser from <a href="https://www.tampermonkey.net/">tampermonkey.net</a>.</li>
<li>Restart your browser after installation.</li>
</ul>
<h3 id="2-create-a-new-script">2. Create a New Script<a hidden class="anchor" aria-hidden="true" href="#2-create-a-new-script">#</a></h3>
<ul>
<li>Open the Tampermonkey extension ‚Üí Dashboard ‚Üí ‚ÄúCreate a new script.‚Äù</li>
<li>Delete the boilerplate code so the editor is blank.</li>
</ul>
<h3 id="3-add-the-script">3. Add the Script<a hidden class="anchor" aria-hidden="true" href="#3-add-the-script">#</a></h3>
<p>Copy and paste the following code into the new script:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// ==UserScript==
</span></span></span><span class="line"><span class="cl"><span class="c1">// @name         Databricks Tab Emoji Label
</span></span></span><span class="line"><span class="cl"><span class="c1">// @namespace    http://tampermonkey.net/
</span></span></span><span class="line"><span class="cl"><span class="c1">// @version      1.5
</span></span></span><span class="line"><span class="cl"><span class="c1">// @description  Add emoji and label to Databricks tab title based on environment
</span></span></span><span class="line"><span class="cl"><span class="c1">// @author       Matthew Norberg
</span></span></span><span class="line"><span class="cl"><span class="c1">// @match        https://&lt;your-domain-here&gt;.azuredatabricks.net/*
</span></span></span><span class="line"><span class="cl"><span class="c1">// @grant        none
</span></span></span><span class="line"><span class="cl"><span class="c1">// ==/UserScript==
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;use strict&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">function</span> <span class="nx">updateTitle</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">emoji</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Define your environment domains here
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="kd">let</span> <span class="nx">devDomain</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">qaDomain</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">prodDomain</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">devDomain</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;DEV&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">emoji</span> <span class="o">=</span> <span class="s1">&#39;üü¢&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">qaDomain</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;QA&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">emoji</span> <span class="o">=</span> <span class="s1">&#39;üü°&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">url</span><span class="p">.</span><span class="nx">includes</span><span class="p">(</span><span class="nx">prodDomain</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;PROD&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">emoji</span> <span class="o">=</span> <span class="s1">&#39;üî¥&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">label</span> <span class="o">=</span> <span class="s1">&#39;OTHER&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">emoji</span> <span class="o">=</span> <span class="s1">&#39;‚ö™&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="sb">`[</span><span class="si">${</span><span class="nx">emoji</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">label</span><span class="si">}</span><span class="sb">]`</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="sb">`[</span><span class="si">${</span><span class="nx">emoji</span><span class="si">}</span><span class="sb"> </span><span class="si">${</span><span class="nx">label</span><span class="si">}</span><span class="sb">] </span><span class="si">${</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Initial run
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">updateTitle</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// Monitor for URL changes in SPA
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">let</span> <span class="nx">lastUrl</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kr">const</span> <span class="nx">currentUrl</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">currentUrl</span> <span class="o">!==</span> <span class="nx">lastUrl</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">lastUrl</span> <span class="o">=</span> <span class="nx">currentUrl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">updateTitle</span><span class="p">,</span> <span class="mi">2000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}).</span><span class="nx">observe</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="p">{</span><span class="nx">subtree</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">childList</span><span class="o">:</span> <span class="kc">true</span><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">})();</span>
</span></span></code></pre></div><h3 id="4-configure-environment-domains">4. Configure Environment Domains<a hidden class="anchor" aria-hidden="true" href="#4-configure-environment-domains">#</a></h3>
<p>Near the top of the script, replace the placeholders with your actual environment domains:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">devDomain</span> <span class="o">=</span> <span class="s1">&#39;your-dev-domain&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">qaDomain</span> <span class="o">=</span> <span class="s1">&#39;your-qa-domain&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">prodDomain</span> <span class="o">=</span> <span class="s1">&#39;your-prod-domain&#39;</span><span class="p">;</span>
</span></span></code></pre></div><h3 id="5-save-and-enable-the-script">5. Save and Enable the Script<a hidden class="anchor" aria-hidden="true" href="#5-save-and-enable-the-script">#</a></h3>
<ul>
<li>
<p>Save your changes (File ‚Üí Save).</p>
</li>
<li>
<p>Make sure the script toggle in Tampermonkey is turned on (green).</p>
</li>
</ul>
<h3 id="6-enable-user-scripts-in-chrome">6. Enable User Scripts in Chrome<a hidden class="anchor" aria-hidden="true" href="#6-enable-user-scripts-in-chrome">#</a></h3>
<ul>
<li>
<p>Go to <code>chrome://extensions</code> ‚Üí find Tampermonkey ‚Üí click <strong>Details</strong>.</p>
</li>
<li>
<p>Make sure <strong>Allow user scripts</strong> is enabled.</p>
</li>
</ul>
<blockquote>
<p>Note: Other browsers may have different settings for allowing user scripts‚Äîadapt accordingly.</p></blockquote>
<h3 id="7-verify-installation">7. Verify installation<a hidden class="anchor" aria-hidden="true" href="#7-verify-installation">#</a></h3>
<ul>
<li>
<p>Open your Databricks environment in a new tab.</p>
</li>
<li>
<p>After a few seconds, your tab title should display the correct emoji + environment label.</p>
</li>
</ul>
<h2 id="troubleshooting">Troubleshooting<a hidden class="anchor" aria-hidden="true" href="#troubleshooting">#</a></h2>
<p><strong>Tab title doesn‚Äôt update right away</strong></p>
<ul>
<li>
<p>The script intentionally waits <strong>3 seconds</strong> after page load before applying changes.</p>
</li>
<li>
<p>Without this delay, the title gets updated but is overwritten during the web page loading process.</p>
</li>
<li>
<p>In testing, <strong>3 seconds worked well</strong>, but you can adjust this by editing the <code>setTimeout</code> call in the code:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">setTimeout</span><span class="p">(</span><span class="nx">updateTitle</span><span class="p">,</span> <span class="mi">3000</span><span class="p">);</span>
</span></span></code></pre></div></li>
</ul>
<p><strong>Still not working?</strong></p>
<p>Double-check that:</p>
<ul>
<li>The script is enabled in Tampermonkey.</li>
<li>Your domains are correctly set in both the variables and the @match lines.</li>
<li>‚ÄúAllow user scripts‚Äù is enabled in your browser‚Äôs extension settings.</li>
</ul>
<h2 id="final-thoughts">Final Thoughts<a hidden class="anchor" aria-hidden="true" href="#final-thoughts">#</a></h2>
<p>It‚Äôs a small tweak, but it solves a surprisingly big problem. If you‚Äôre juggling multiple Databricks environments, this little script will save you from confusion‚Äîand maybe even prevent a mistake or two.</p>
<p>Sometimes the best tools aren‚Äôt the big, complicated ones. They‚Äôre the tiny hacks that make your day smoother.</p>
<p>üëâ You can grab the full script and step-by-step setup instructions in the <code>databricks-tools-repo</code> <a href="https://github.com/mnorberg-dev/databricks-tools">here</a>.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/databricks/">Databricks</a></li>
      <li><a href="http://localhost:1313/tags/tampermonkey/">Tampermonkey</a></li>
      <li><a href="http://localhost:1313/tags/tools/">Tools</a></li>
      <li><a href="http://localhost:1313/tags/productivity/">Productivity</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Matthew Norberg&#39;s Data Engineering Blog</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
